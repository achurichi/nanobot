{
	"name": "ROS 2 Local Development Container",
	"privileged": true,
	"remoteUser": "dev",
	"build": {
		"dockerfile": "Dockerfile.local",
		"args": {
			"USERNAME": "dev"
		}
	},
	"workspaceFolder": "/home/ros_ws",
	"workspaceMount": "source=${localWorkspaceFolder},target=/home/ros_ws,type=bind",
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-vscode.cpptools",
				"ms-vscode.cpptools-themes",
				"twxs.cmake",
				"donjayamanne.python-extension-pack",
				"eamodio.gitlens",
				"ms-iot.vscode-ros"
			]
		}
	},
	"containerEnv": {
		"DISPLAY": "unix:0"
	},
	"runArgs": [
		"--net=host",
		"--pid=host",
		"--ipc=host",
		"--gpus", "all",
    "-e", "NVIDIA_DRIVER_CAPABILITIES=all",
		"-e", "DISPLAY=${env:DISPLAY}"
	],
	"mounts": [
		"source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind,consistency=cached",
		"source=/dev/dri,target=/dev/dri,type=bind,consistency=cached"
	],
	"postCreateCommand": "sudo chown -R $(whoami) /home/ros_ws/"
}
